<html>
<head>
  <script language="javascript" type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.3.3/p5.js"></script>
  <script language="javascript" type="text/javascript" src="//cdn.jsdelivr.net/p5.js/0.3.2/addons/p5.dom.js"></script>
</head>
<body>
	<p>3.7: Oscillator objects</p>

<script>
// Oscillator object ------------------
var Oscillator = function(){
  this.angle = createVector();
  this.velocity = createVector(random(-0.05, 0.05), random(-0.05, 0.05));
  this.amplitude = createVector(random(20, width/2), random(20, height/2));
};

Oscillator.prototype.oscillate = function(){
  this.angle.add(this.velocity);
};

Oscillator.prototype.display = function(){
  var x = sin(this.angle.x) * this.amplitude.x;
  var y = sin(this.angle.y) * this.amplitude.y;

  push();
  translate(width/2, height/2);
  stroke(50);
  strokeWeight(2);
  fill(0, 127, 150);
  line(0, 0, x, y);
  ellipse(x, y, 32, 32);
  pop();
};

var oscillators = [];

function setup() {
  createCanvas(640,360);
  for (var i = 0; i < 10; i++){
    oscillators.push(new Oscillator());
  }
}

function draw() {
  background(240);
  for (var i = 0; i < oscillators.length; i++) {
    oscillators[i].oscillate();
    oscillators[i].display();
  }
}
</script>
</body>
</html>